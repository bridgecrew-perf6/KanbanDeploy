{"ast":null,"code":"var _jsxFileName = \"/app/app/javascript/components/Board_component.jsx\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\n\nfunction Card_component(props) {\n  var _useState = useState(props.cardTitle),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputValue = _useState2[0],\n      setInputValue = _useState2[1];\n\n  function handleChange(event) {\n    setInputValue(event.target.value);\n  }\n\n  function deleteCard() {\n    axios[\"delete\"](\"http://94.250.250.156:3000/api/v1/cards/\".concat(props.cardId)).then(function () {\n      return props.deleteDestroyedCardFromCards(props.cardId);\n    });\n  }\n\n  function moveCardToLeft() {\n    if (props.columnPosition != 1) {\n      props.moveCardToLeftColumn(inputValue, props.cardId);\n    }\n  }\n\n  function moveCardToRight() {\n    props.moveCardToRightColumn(inputValue, props.cardId);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: inputValue,\n    name: \"login\",\n    onKeyUp: function onKeyUp(e) {\n      return props.handleUpdateCard(e.code, inputValue, props.cardId);\n    },\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: moveCardToLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, \"Left\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: deleteCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, \"Delete\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: moveCardToRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, \"Right\"));\n}\n\nfunction Colomn_component(props) {\n  var _this = this;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cards = _useState4[0],\n      setCards = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inputValue = _useState6[0],\n      setInputValue = _useState6[1];\n\n  function deleteDestroyedCardFromCards(cardId) {\n    var newCards = cards.filter(function (card) {\n      return card.id !== cardId;\n    });\n    setCards(newCards);\n  }\n\n  function moveCardToLeftColumn(cardTitle, cardId) {\n    axios.put(\"http://94.250.250.156:3000/api/v1/card_move_left/\".concat(cardId)).then(function () {\n      props.moveCardToLeftColumnWithUpdate(cardTitle);\n    });\n  }\n\n  function moveCardToRightColumn(cardTitle, cardId) {\n    axios.put(\"http://94.250.250.156:3000/api/v1/card_move_right/\".concat(cardId)).then(function () {\n      props.moveCardToRightColumnWithUpdate(cardTitle);\n    });\n  }\n\n  function handleChange(event) {\n    setInputValue(event.target.value);\n  }\n\n  function handleKeyPress(e) {\n    if (e.code == \"Enter\") {\n      axios.post(\"http://94.250.250.156:3000/api/v1/cards\", {\n        card: {\n          title: inputValue,\n          colomn_id: props.columnId\n        }\n      }).then(function (response) {\n        setCards([].concat(_toConsumableArray(cards), [response.data]));\n        setInputValue(\"\");\n      });\n    }\n  }\n\n  function handleUpdateCard(code, value, cardId) {\n    if (code == \"Enter\") {\n      axios.put(\"http://94.250.250.156:3000/api/v1/cards/\".concat(cardId), {\n        card: {\n          title: value\n        }\n      }).then(function (response) {\n        var newCards = cards.filter(function (card) {\n          if (card.id === response.data.id) {\n            card.title = response.data.title;\n            return card;\n          } else {\n            return card;\n          }\n        });\n        setCards(newCards);\n      });\n    }\n  }\n\n  useEffect(function () {\n    axios.get(\"http://94.250.250.156:3000/api/v1/cards/\".concat(props.columnId)).then(function (response) {\n      setCards(response.data);\n    });\n  }, []);\n  console.log('columnId: ', props.columnId, ' cards: ', cards);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"colomn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, props.columnTitle), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return props.deleteColumn(props.columnId);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, \"Delete\"), cards.map(function (card) {\n    return /*#__PURE__*/React.createElement(Card_component, {\n      key: card.id,\n      cardTitle: card.title,\n      cardId: card.id,\n      columnPosition: props.columnPosition,\n      deleteDestroyedCardFromCards: deleteDestroyedCardFromCards,\n      moveCardToLeftColumn: moveCardToLeftColumn,\n      moveCardToRightColumn: moveCardToRightColumn,\n      handleUpdateCard: handleUpdateCard,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: inputValue,\n    name: \"login\",\n    onKeyUp: function onKeyUp(e) {\n      return handleKeyPress(e);\n    },\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default function Board_component() {\n  var _this2 = this;\n\n  var link = getLink();\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      board = _useState8[0],\n      setBoard = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      columns = _useState10[0],\n      setColumns = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      inputAddColumnValue = _useState12[0],\n      setInputAddColumnValue = _useState12[1];\n\n  function deleteColumn(columnId) {\n    axios[\"delete\"](\"http://94.250.250.156:3000/api/v1/colomns/\".concat(columnId)).then(function () {\n      var newColumns = columns.filter(function (column) {\n        return column.id !== columnId;\n      });\n      setColumns(newColumns);\n    });\n  }\n\n  function moveCardToLeftColumnWithUpdate() {\n    setColumns([]);\n    axios.get(\"http://94.250.250.156:3000/api/v1/colomns/\".concat(board.id)).then(function (response) {\n      setColumns(response.data);\n    });\n  }\n\n  function moveCardToRightColumnWithUpdate() {\n    setColumns([]);\n    axios.get(\"http://94.250.250.156:3000/api/v1/colomns/\".concat(board.id)).then(function (response) {\n      setColumns(response.data);\n    });\n  }\n\n  function handleChangeAddColumn(event) {\n    setInputAddColumnValue(event.target.value);\n  }\n\n  function handleKeyPressAddColumn(e) {\n    var newColumnPosition = 1;\n    columns.map(function (column) {\n      newColumnPosition += 1;\n    });\n\n    if (e.code == \"Enter\") {\n      axios.post(\"http://94.250.250.156:3000/api/v1/colomns\", {\n        colomn: {\n          title: inputAddColumnValue,\n          position: newColumnPosition,\n          board_id: board.id\n        }\n      }).then(function (response) {\n        setColumns([].concat(_toConsumableArray(columns), [response.data]));\n        setInputAddColumnValue(\"\");\n      });\n    }\n  }\n\n  useEffect(function () {\n    axios.get(\"http://94.250.250.156:3000/api/v1/boards/\".concat(link)).then(function (response) {\n      setBoard(response.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (board !== null && board !== undefined) {\n      axios.get(\"http://94.250.250.156:3000/api/v1/colomns/\".concat(board.id)).then(function (response) {\n        setColumns(response.data);\n      });\n    }\n  }, [board]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 10\n    }\n  }, columns.map(function (column) {\n    return /*#__PURE__*/React.createElement(Colomn_component, {\n      key: column.id,\n      columnTitle: column.title,\n      columnId: column.id,\n      columnPosition: column.position,\n      deleteColumn: deleteColumn,\n      moveCardToLeftColumnWithUpdate: moveCardToLeftColumnWithUpdate,\n      moveCardToRightColumnWithUpdate: moveCardToRightColumnWithUpdate,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 12\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: inputAddColumnValue,\n    name: \"login\",\n    onKeyUp: function onKeyUp(e) {\n      return handleKeyPressAddColumn(e);\n    },\n    onChange: handleChangeAddColumn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }));\n}\n\nfunction getLink() {\n  var url = window.location.href;\n  var splittedurl = url.split('/');\n  var link = splittedurl[splittedurl.length - 1];\n  return link;\n}","map":{"version":3,"sources":["/app/app/javascript/components/Board_component.jsx"],"names":["React","useState","useEffect","axios","Card_component","props","cardTitle","inputValue","setInputValue","handleChange","event","target","value","deleteCard","cardId","then","deleteDestroyedCardFromCards","moveCardToLeft","columnPosition","moveCardToLeftColumn","moveCardToRight","moveCardToRightColumn","e","handleUpdateCard","code","Colomn_component","cards","setCards","newCards","filter","card","id","put","moveCardToLeftColumnWithUpdate","moveCardToRightColumnWithUpdate","handleKeyPress","post","title","colomn_id","columnId","response","data","get","console","log","columnTitle","deleteColumn","map","Board_component","link","getLink","board","setBoard","columns","setColumns","inputAddColumnValue","setInputAddColumnValue","newColumns","column","handleChangeAddColumn","handleKeyPressAddColumn","newColumnPosition","colomn","position","board_id","undefined","url","window","location","href","splittedurl","split","length"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from \"react\";\nimport axios from 'axios';  \n\n\nfunction Card_component(props) {\n  const [inputValue, setInputValue] = useState(props.cardTitle);\n\n  function handleChange(event) {\n\t\tsetInputValue(event.target.value);\n\t}\n\n  function deleteCard (){\n    axios.delete(`http://94.250.250.156:3000/api/v1/cards/${props.cardId}`)\n      .then(() => props.deleteDestroyedCardFromCards(props.cardId)) \n  }\n\n  function moveCardToLeft(){\n    if (props.columnPosition != 1){\n      props.moveCardToLeftColumn(inputValue, props.cardId)\n    }\n  }\n\n  function moveCardToRight(){\n    props.moveCardToRightColumn(inputValue, props.cardId)\n  }\n  return (\n    <div className=\"card\">\n      <input type=\"text\" value={inputValue} name=\"login\" onKeyUp={(e) => props.handleUpdateCard(e.code, inputValue, props.cardId)} onChange={handleChange}/>\n      <button onClick={moveCardToLeft}>Left</button> \n      <button onClick={deleteCard}>Delete</button> \n      <button onClick={moveCardToRight}>Right</button> \n    </div>\n  );\n}\n\n\nfunction Colomn_component(props) {\n  const [cards, setCards] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n\n  function deleteDestroyedCardFromCards (cardId) {\n    const newCards = cards.filter((card) => card.id !== cardId)\n    setCards(newCards)\n  }\n\n  function moveCardToLeftColumn(cardTitle, cardId){\n    axios.put(`http://94.250.250.156:3000/api/v1/card_move_left/${cardId}`)\n    .then(() => {props.moveCardToLeftColumnWithUpdate(cardTitle)})\n  }\n\n  function moveCardToRightColumn(cardTitle, cardId){\n    axios.put(`http://94.250.250.156:3000/api/v1/card_move_right/${cardId}`)\n    .then(() => {props.moveCardToRightColumnWithUpdate(cardTitle)})\n  }\n\n  function handleChange(event) {\n\t\tsetInputValue(event.target.value);\n\t}\n  \n  function handleKeyPress(e) {\n    if (e.code == \"Enter\") {\n      axios.post(`http://94.250.250.156:3000/api/v1/cards`,{ card: { title:  inputValue, colomn_id: props.columnId}})\n      .then((response) => {\n        setCards([...cards, response.data])\n        setInputValue(\"\")\n      })\n    }\n  }\n\n  function handleUpdateCard(code, value, cardId) {\n    if (code == \"Enter\") {\n      axios.put(`http://94.250.250.156:3000/api/v1/cards/${cardId}`, { card: { title:  value}})\n      .then((response) => {\n        const newCards = cards.filter((card) => {\n          if (card.id === response.data.id) {\n            card.title = response.data.title\n            return card\n          } else {\n            return card\n          }\n        })\n        setCards(newCards);\n      })\n    }\n  }\n\n  useEffect(() => {\n    axios.get(`http://94.250.250.156:3000/api/v1/cards/${props.columnId}`)\n    .then((response) => {\n      setCards(response.data);\n    })\n  }, []);\n\n  console.log('columnId: ', props.columnId, ' cards: ', cards);\n  return <div className=\"colomn\">\n    <h3>{props.columnTitle}</h3>\n    <button onClick={() => props.deleteColumn(props.columnId)}>Delete</button> \n    {cards.map((card) => {\n        return <Card_component \n          key={card.id} \n          cardTitle={card.title}\n          cardId={card.id} \n          columnPosition = {props.columnPosition}\n          deleteDestroyedCardFromCards = {deleteDestroyedCardFromCards} \n          moveCardToLeftColumn = {moveCardToLeftColumn}\n          moveCardToRightColumn = {moveCardToRightColumn}\n          handleUpdateCard = {handleUpdateCard} /> ;\n      })}\n    <input type=\"text\" value={inputValue} name=\"login\" onKeyUp={(e) => handleKeyPress(e)} onChange={handleChange}/>\n  </div>\n}\n\n\nexport default function Board_component() {\n  const link = getLink()\n  const [board, setBoard] = useState(null);\n  const [columns, setColumns] = useState([]);\n  const [inputAddColumnValue, setInputAddColumnValue] = useState('');\n\n  function deleteColumn (columnId){\n    axios.delete(`http://94.250.250.156:3000/api/v1/colomns/${columnId}`)\n      .then(() => {\n        const newColumns = columns.filter((column) => column.id !== columnId);\n        setColumns(newColumns)\n    })\n  }\n  \n  function moveCardToLeftColumnWithUpdate() {\n    setColumns([])\n    axios.get(`http://94.250.250.156:3000/api/v1/colomns/${board.id}`)\n      .then((response) => {\n        setColumns(response.data);\n    })\n  }\n\n  function moveCardToRightColumnWithUpdate() {\n    setColumns([])\n    axios.get(`http://94.250.250.156:3000/api/v1/colomns/${board.id}`)\n      .then((response) => {\n        setColumns(response.data);\n    })\n  }\n\n  function handleChangeAddColumn(event) {\n\t\tsetInputAddColumnValue(event.target.value);\n\t}\n\n  function handleKeyPressAddColumn(e) {\n    let newColumnPosition = 1\n    columns.map((column) => {\n      newColumnPosition +=1\n    })\n\n    if (e.code == \"Enter\") {\n      axios.post(`http://94.250.250.156:3000/api/v1/colomns`,{ colomn: { title:  inputAddColumnValue, position: newColumnPosition, board_id: board.id}})\n      .then((response) => {\n        setColumns([...columns, response.data])\n        setInputAddColumnValue(\"\")\n      })\n    }\n  }\n\n  useEffect(() => {\n    axios.get(`http://94.250.250.156:3000/api/v1/boards/${link}`)\n    .then((response) => {\n      setBoard(response.data);\n    })\n  }, []); \n\n  useEffect(() => {\n    if (board !== null && board !== undefined) {\n      axios.get(`http://94.250.250.156:3000/api/v1/colomns/${board.id}`)\n      .then((response) => {\n        setColumns(response.data);\n      })\n    }\n  }, [board]);\n\n\n  return <div>\n    {columns.map((column) => {\n    return <Colomn_component \n    key={column.id} \n    columnTitle={column.title} \n    columnId={column.id} \n    columnPosition={column.position} \n    deleteColumn = {deleteColumn} \n    moveCardToLeftColumnWithUpdate = {moveCardToLeftColumnWithUpdate}\n    moveCardToRightColumnWithUpdate = {moveCardToRightColumnWithUpdate}/>\n    })}\n    <input type=\"text\" value={inputAddColumnValue} name=\"login\" onKeyUp={(e) => handleKeyPressAddColumn(e)} onChange={handleChangeAddColumn}/>\n  </div>\n}\n\nfunction getLink() {\n  let url = window.location.href\n  let splittedurl = url.split('/')\n  let link = splittedurl[splittedurl.length - 1]\n  return link\n}\n\n"]},"metadata":{},"sourceType":"module"}